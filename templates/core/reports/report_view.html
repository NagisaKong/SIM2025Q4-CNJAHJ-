{% extends 'base.html' %}
{% block title %}Reports Â· CSR Platform{% endblock %}
{% block content %}
<h1 class="mb-4 text-2xl font-semibold">Activity reports</h1>
<form method="post" class="mb-6 grid gap-2 rounded border border-slate-200 bg-white p-4 sm:grid-cols-2">
    {% csrf_token %}
    {{ form.as_p }}
    <div class="sm:col-span-2 flex gap-2">
        <button class="btn-primary" type="submit">Generate</button>
    </div>
</form>
{% if rows %}
<div class="mb-4 flex justify-end">
    <form method="post" action="{% url 'core:reports_export' %}">
        {% csrf_token %}
        <input type="hidden" name="report_type" value="{{ form.report_type.value }}">
        <input type="hidden" name="start_date" value="{{ form.start_date.value }}">
        <input type="hidden" name="end_date" value="{{ form.end_date.value }}">
        <button class="btn-secondary" type="submit">Export CSV</button>
    </form>
</div>
<table class="simple-table">
    <thead><tr><th>Period</th><th>Accepted</th><th>Completed</th></tr></thead>
    <tbody>
        {% for row in rows %}
            <tr><td>{{ row.period }}</td><td>{{ row.accepted }}</td><td>{{ row.completed }}</td></tr>
        {% endfor %}
    </tbody>
</table>
{% else %}
<p class="text-sm text-slate-500">Run a report to see activity.</p>
{% endif %}
{% endblock %}
